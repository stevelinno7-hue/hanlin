<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>æ•™å¸« Dashboardï½œAI è§£é¡Œç³»çµ±</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body{background:#f4f6f8;font-family:"Noto Sans TC",sans-serif}
canvas{background:#fff;border-radius:12px}
</style>
</head>

<body class="p-6">

<!-- è§’è‰²åˆ‡æ› -->
<div class="flex gap-3 mb-6">
    <button onclick="switchView('student')" class="px-4 py-2 bg-blue-600 text-white rounded">å­¸ç”Ÿä»‹é¢</button>
    <button onclick="switchView('teacher')" class="px-4 py-2 bg-indigo-600 text-white rounded">æ•™å¸« Dashboard</button>
</div>

<!-- å­¸ç”Ÿä»‹é¢ -->
<section id="studentView">
    <div class="bg-white p-6 rounded shadow">
        <h2 class="font-bold text-lg mb-2">å­¸ç”Ÿè§£é¡Œç•«é¢</h2>
        <p class="text-gray-600 text-sm">
            é€™è£¡æ˜¯å­¸ç”Ÿçœ‹åˆ°çš„ AI è§£é¡Œ / è«–å£‡ç•«é¢ï¼ˆç•¥ï¼‰
        </p>
    </div>
</section>

<!-- æ•™å¸« Dashboard -->
<section id="teacherDashboard" class="hidden space-y-6">

    <h2 class="font-bold text-xl">ğŸ“Š æ•™å¸«æ•™å­¸åˆ†æ Dashboard</h2>

    <!-- åœ–è¡¨å€ -->
    <div class="grid md:grid-cols-2 gap-6">

        <div class="p-4">
            <h3 class="font-bold mb-2">é¡Œå‹éŒ¯èª¤åˆ†å¸ƒï¼ˆé•·æ¢åœ–ï¼‰</h3>
            <canvas id="barChart" width="400" height="260"></canvas>
        </div>

        <div class="p-4">
            <h3 class="font-bold mb-2">å–®å…ƒéŒ¯èª¤æ¯”ä¾‹ï¼ˆåœ“é¤…åœ–ï¼‰</h3>
            <canvas id="pieChart" width="400" height="260"></canvas>
        </div>

    </div>

    <!-- æ•™å­¸è§£è®€ -->
    <div class="bg-white p-6 rounded shadow">
        <h3 class="font-bold mb-2">ğŸ§‘â€ğŸ« æ•™å¸«è§£è®€</h3>
        <ul class="list-disc ml-5 text-sm text-gray-700">
            <li>è¨ˆç®—é¡ŒéŒ¯èª¤æ¯”ä¾‹åé«˜ï¼Œå­¸ç”Ÿå…¬å¼ç†è§£ä¸è¶³</li>
            <li>ä¸€æ¬¡å‡½æ•¸å–®å…ƒç‚ºä¸»è¦å¤±åˆ†ä¾†æº</li>
            <li>å»ºè­°é€²è¡Œæ¦‚å¿µå°å‘è£œæ•‘æ•™å­¸</li>
        </ul>
    </div>

</section>

<script>
/* ========= å‡è³‡æ–™ ========= */
const errorByType = {
    "é¸æ“‡é¡Œ": 12,
    "è¨ˆç®—é¡Œ": 28,
    "ç”³è«–é¡Œ": 18
};

const errorByUnit = {
    "ä¸€æ¬¡å‡½æ•¸": 30,
    "å¾®åˆ†": 20,
    "ç‰›é “é‹å‹•": 8,
    "åŒ–å­¸åæ‡‰": 6
};

/* ========= è§’è‰²åˆ‡æ› ========= */
function switchView(role){
    studentView.classList.toggle("hidden", role !== "student");
    teacherDashboard.classList.toggle("hidden", role !== "teacher");
    if(role === "teacher"){
        drawBarChart();
        drawPieChart();
    }
}

/* ========= Canvas é•·æ¢åœ– ========= */
function drawBarChart(){
    const ctx = barChart.getContext("2d");
    ctx.clearRect(0,0,400,260);

    const values = Object.values(errorByType);
    const labels = Object.keys(errorByType);
    const max = Math.max(...values);
    const barWidth = 60;

    values.forEach((v,i)=>{
        const h = (v/max)*180;
        ctx.fillStyle = "#60a5fa";
        ctx.fillRect(60+i*100,220-h,barWidth,h);
        ctx.fillStyle="#000";
        ctx.fillText(labels[i],60+i*100,240);
        ctx.fillText(v,80+i*100,210-h);
    });
}

/* ========= Canvas åœ“é¤…åœ– ========= */
function drawPieChart(){
    const ctx = pieChart.getContext("2d");
    ctx.clearRect(0,0,400,260);

    const total = Object.values(errorByUnit).reduce((a,b)=>a+b,0);
    let start = 0;
    const colors = ["#93c5fd","#60a5fa","#3b82f6","#2563eb"];

    Object.entries(errorByUnit).forEach(([label,val],i)=>{
        const slice = (val/total)*Math.PI*2;
        ctx.beginPath();
        ctx.moveTo(200,130);
        ctx.fillStyle = colors[i%colors.length];
        ctx.arc(200,130,90,start,start+slice);
        ctx.fill();
        start += slice;
    });
}
</script>

</body>
</html>
